@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Urbanist:wght@300;400;500;600;700&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* Accent Color Utilities - using CSS variables */
.bg-accent-50 { background-color: var(--accent-50); }
.bg-accent-100 { background-color: var(--accent-100); }
.bg-accent-200 { background-color: var(--accent-200); }
.bg-accent-300 { background-color: var(--accent-300); }
.bg-accent-400 { background-color: var(--accent-400); }

.text-accent-50 { color: var(--accent-50); }
.text-accent-100 { color: var(--accent-100); }
.text-accent-200 { color: var(--accent-200); }
.text-accent-300 { color: var(--accent-300); }
.text-accent-400 { color: var(--accent-400); }

.border-accent-50 { border-color: var(--accent-50); }
.border-accent-100 { border-color: var(--accent-100); }
.border-accent-200 { border-color: var(--accent-200); }
.border-accent-300 { border-color: var(--accent-300); }
.border-accent-400 { border-color: var(--accent-400); }

.ring-accent-300 { --tw-ring-color: var(--accent-300); }
.focus\:ring-accent-300:focus { --tw-ring-color: var(--accent-300); }
.focus\:border-accent-300:focus { border-color: var(--accent-300); }

.hover\:bg-accent-300:hover { background-color: var(--accent-300); }
.hover\:bg-accent-400:hover { background-color: var(--accent-400); }
.hover\:text-accent-300:hover { color: var(--accent-300); }
.hover\:text-accent-400:hover { color: var(--accent-400); }
.hover\:border-accent-300:hover { border-color: var(--accent-300); }

.fill-accent-300 { fill: var(--accent-300); }
.fill-accent-100 { fill: var(--accent-100); }

/* Base Styles */
html {
    background: #fafafa;
}

body {
    font-family: "Urbanist", sans-serif;
}

/* Scrollbar Styles */
.overflow-style-none::-webkit-scrollbar {
    display: none;
}

.overflow-style-none {
    -ms-overflow-style: none;
    scrollbar-width: none;
}

.scroll-style-1::-webkit-scrollbar {
    width: 2px;
}

.scroll-style-1::-webkit-scrollbar-track {
    background: #f1f1f1;
}

.scroll-style-1::-webkit-scrollbar-thumb {
    background: #8e8e8e;
}

/* Layout Wrapper */
.layout-wrapper .sidebar-wrapper {
    left: -308px;
    transition: left 0.5s ease-in-out;
}

.layout-wrapper.active .sidebar-wrapper {
    left: 0;
}

.layout-wrapper .body-wrapper {
    transition: margin-left 0.5s ease-in-out;
}

.layout-wrapper.active .body-wrapper {
    margin-left: 208px;
}

.layout-wrapper.active .body-wrapper .drawer-btn {
    opacity: 0;
    transition: opacity 0.5s ease-in-out;
}

.layout-wrapper .body-wrapper .drawer-btn {
    opacity: 100;
    transition: opacity 0.5s ease-in-out;
}

.layout-wrapper.active .body-wrapper .header-wrapper {
    width: calc(100% - 308px);
    transition: width 0.5s ease-in-out;
}

.layout-wrapper .body-wrapper .header-wrapper {
    width: calc(100% - 96px);
    transition: width 0.5s ease-in-out;
}

/* Modal Styles */
body.modal-open {
    overflow: hidden;
}

.modal {
    z-index: 9999;
}

.modal-overlay {
    z-index: -1;
}

/* Sidebar Navigation */
:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item,
:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item
    .item-ico
    svg
    .path-1,
:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item
    .item-ico
    svg
    .path-2 {
    transition: all 0.3s ease-in-out;
}

/* Default accent color for sidebar icons path-2 */
:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item
    .item-ico
    svg
    .path-2 {
    fill: var(--accent-300);
    stroke: var(--accent-300);
}

:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item:hover
    .item-ico
    svg
    .path-1,
:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item:hover {
    fill: var(--accent-300);
    color: var(--accent-300);
}

:is(.sidebar-wrapper, .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item:hover
    .item-ico
    svg
    .path-2 {
    fill: var(--accent-100);
}

.sidebar-wrapper .sidebar-body .nav-wrapper ul li.item .sub-menu {
    display: none;
    animation: tabFade 1s;
}

.sidebar-wrapper .sidebar-body .nav-wrapper ul li.item .sub-menu.active {
    display: block;
}

@keyframes tabFade {
    0% { opacity: 0; }
    100% { opacity: 1; }
}

/* Dark Mode Sidebar */
:is(.dark .sidebar-wrapper, .dark .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item
    .item-ico
    svg
    .path-1,
:is(.dark .sidebar-wrapper, .dark .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item {
    fill: #FFFFFF;
    color: #FFFFFF;
}

:is(.dark .sidebar-wrapper, .dark .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item:hover
    .item-ico
    svg
    .path-1,
:is(.dark .sidebar-wrapper, .dark .sidebar-wrapper-collapse)
    .sidebar-body
    .item-wrapper
    ul
    li.item:hover {
    fill: var(--accent-200);
    color: var(--accent-200);
}

/* Component Layer */
@layer components {
    /* Buttons */
    .btn-primary {
        @apply px-4 py-2 bg-success-300 text-white rounded-lg hover:bg-success-400 transition-all font-medium;
    }

    .btn-secondary {
        @apply px-4 py-2 bg-bgray-200 text-bgray-800 rounded-lg hover:bg-bgray-300 transition-all font-medium;
    }

    .btn-danger {
        @apply px-4 py-2 bg-error-200 text-white rounded-lg hover:bg-error-300 transition-all font-medium;
    }

    /* Form Inputs */
    .form-input {
        @apply w-full px-4 py-3 border border-bgray-300 rounded-lg focus:ring-2 focus:ring-success-300 focus:border-transparent dark:bg-darkblack-500 dark:border-darkblack-400 dark:text-white;
    }

    .form-select {
        @apply w-full px-4 py-3 border border-bgray-300 rounded-lg focus:ring-2 focus:ring-success-300 focus:border-transparent dark:bg-darkblack-500 dark:border-darkblack-400 dark:text-white;
    }

    .form-label {
        @apply block text-sm font-medium text-bgray-700 dark:text-bgray-50 mb-2;
    }

    /* Cards */
    .card {
        @apply bg-white rounded-xl shadow-sm border border-bgray-100 p-6 dark:bg-darkblack-600 dark:border-darkblack-400;
    }

    /* Status Badges - sesuai PRD */
    .badge {
        @apply px-2.5 py-0.5 rounded-full text-xs font-medium;
    }

    .badge-success {
        @apply bg-success-50 text-success-400;
    }

    .badge-warning {
        @apply bg-warning-100 text-warning-300;
    }

    .badge-danger {
        @apply bg-error-50 text-error-300;
    }

    .badge-dark {
        @apply bg-bgray-800 text-white;
    }

    /* Status Pajak Badges - sesuai PRD */
    .badge-belum-jatuh-tempo {
        @apply bg-green-100 text-green-800;
    }

    .badge-akan-jatuh-tempo {
        @apply bg-yellow-100 text-yellow-800;
    }

    .badge-jatuh-tempo {
        @apply bg-red-100 text-red-800;
    }

    .badge-terlambat {
        @apply bg-gray-800 text-white;
    }

    /* Table */
    .table-wrapper {
        @apply overflow-x-auto;
    }

    .table {
        @apply min-w-full divide-y divide-bgray-200 dark:divide-darkblack-400;
    }

    .table th {
        @apply px-6 py-3 text-left text-xs font-semibold text-bgray-600 dark:text-bgray-300 uppercase tracking-wider;
    }

    .table td {
        @apply px-6 py-4 whitespace-nowrap text-sm text-bgray-800 dark:text-white;
    }
}

/* Responsive */
@media (max-width: 1024px) {
    .layout-wrapper.active .body-wrapper {
        margin-left: 0;
    }

    .layout-wrapper.active .body-wrapper .header-wrapper {
        width: calc(100% - 96px);
        transition: all 0.5s ease-in-out;
    }
}

@media (max-width: 426px) {
    .layout-wrapper.active .body-wrapper {
        margin-left: 0;
    }

    .layout-wrapper.active .body-wrapper .drawer-btn {
        opacity: 1;
    }

    .layout-wrapper .body-wrapper {
        margin-left: 0;
    }

    /* Mobile: sidebar hidden by default, shown when active */
    .layout-wrapper .sidebar-wrapper {
        left: -308px;
    }

    .layout-wrapper.active .sidebar-wrapper {
        left: 0;
    }
}

/* ============================================
   Mobile Touch Target & Accessibility Fixes
   ============================================ */

/* Safe area insets for notched devices */
@supports (padding: env(safe-area-inset-top)) {
    .body-wrapper {
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
    }

    .sidebar-wrapper {
        padding-top: env(safe-area-inset-top);
    }
}

/* Prevent horizontal scroll */
html, body {
    overflow-x: hidden;
    max-width: 100vw;
}

.body-wrapper {
    overflow-x: hidden;
}

/* Minimum touch target size (44x44px per WCAG) */
@media (max-width: 768px) {
    /* Buttons minimum size */
    button,
    .btn,
    [role="button"],
    a.inline-flex {
        min-height: 44px;
    }

    /* Icon buttons */
    .icon-btn,
    button:has(svg:only-child),
    a:has(svg:only-child) {
        min-width: 44px;
        min-height: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* Table action buttons */
    .table td button,
    .table td a {
        min-height: 36px;
        padding: 8px 12px;
    }

    /* Pagination links */
    nav[role="navigation"] a,
    nav[role="navigation"] span,
    .pagination a,
    .pagination span {
        min-height: 44px;
        min-width: 44px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
    }

    /* Form elements */
    input[type="checkbox"],
    input[type="radio"] {
        min-width: 20px;
        min-height: 20px;
    }

    /* Checkbox/Radio containers for better touch */
    label:has(input[type="checkbox"]),
    label:has(input[type="radio"]) {
        min-height: 44px;
        display: inline-flex;
        align-items: center;
        gap: 8px;
    }

    /* Select dropdowns */
    select {
        min-height: 44px;
    }

    /* Card action links */
    .card a,
    .mobile-card a {
        min-height: 44px;
        display: inline-flex;
        align-items: center;
    }

    /* Sidebar menu items */
    .sidebar-wrapper .item a {
        min-height: 48px;
        display: flex;
        align-items: center;
    }

    /* Header icons */
    .header-mobile button,
    .header-mobile a {
        min-width: 44px;
        min-height: 44px;
    }
}

/* Mobile card view utilities */
@media (max-width: 768px) {
    .mobile-card {
        background: white;
        border-radius: 12px;
        padding: 16px;
        margin-bottom: 12px;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    }

    .dark .mobile-card {
        background: #1f2937;
    }

    .mobile-card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 12px;
    }

    .mobile-card-title {
        font-weight: 600;
        font-size: 16px;
        color: #1a202c;
    }

    .dark .mobile-card-title {
        color: white;
    }

    .mobile-card-body {
        display: flex;
        flex-direction: column;
        gap: 8px;
    }

    .mobile-card-row {
        display: flex;
        justify-content: space-between;
        font-size: 14px;
    }

    .mobile-card-label {
        color: #6b7280;
    }

    .dark .mobile-card-label {
        color: #9ca3af;
    }

    .mobile-card-value {
        color: #1f2937;
        font-weight: 500;
    }

    .dark .mobile-card-value {
        color: white;
    }

    .mobile-card-actions {
        display: flex;
        gap: 8px;
        margin-top: 12px;
        padding-top: 12px;
        border-top: 1px solid #e5e7eb;
    }

    .dark .mobile-card-actions {
        border-top-color: #374151;
    }
}

/* FullCalendar Mobile Responsiveness */
@media (max-width: 640px) {
    /* Calendar header buttons - stack on mobile */
    .fc .fc-toolbar {
        flex-direction: column;
        gap: 8px;
    }

    .fc .fc-toolbar-chunk {
        display: flex;
        justify-content: center;
    }

    .fc .fc-toolbar-title {
        font-size: 1.1rem;
    }

    /* Smaller buttons */
    .fc .fc-button {
        padding: 6px 10px;
        font-size: 12px;
    }

    .fc .fc-button-group > .fc-button {
        padding: 6px 8px;
    }

    /* Limit visible view buttons on very small screens */
    .fc .fc-multiMonthYear-button {
        display: none;
    }

    /* Event styling */
    .fc .fc-event {
        font-size: 11px;
        padding: 2px 4px;
    }

    /* Day cell padding */
    .fc .fc-daygrid-day {
        min-height: 60px;
    }

    /* Day number */
    .fc .fc-daygrid-day-number {
        font-size: 12px;
        padding: 4px;
    }
}
